{%- capture section_settings -%}
{
  "type": {{ settings.cart_type | json }},
  "itemCount": {{ cart.item_count }},
  "drawer": true,
  "hasShippingEstimator": false
}
{%- endcapture -%}
  {% assign grand_total = cart.total_price | divided_by: 100 %}
{% assign 10_min_value = settings.10_min_value  | plus : 0 %}
{% assign 10_max_value = settings.10_max_value  | plus : 0 %}
{% assign 20_min_value = settings.20_min_value  | plus : 0 %}
{% assign 20_max_value = settings.20_max_value  | plus : 0 %}
{% assign 35_min_value = settings.35_min_value  | plus : 0 %}
{% assign 35_max_value = settings.35_max_value  | plus : 0 %}
{% assign 50_min_value = settings.50_min_value  | plus : 0 %}
{% assign 50_max_value = settings.50_max_value  | plus : 0 %}
{% assign 75_min_value = settings.75_min_value  | plus : 0 %}
{% assign 75_max_value = settings.75_max_value  | plus : 0 %}
{% assign 100_min_value = settings.100_min_value  | plus : 0 %}
{% assign 100_max_value = settings.100_max_value  | plus : 0 %}


<div id="sidebar-cart" class="Drawer Drawer--fromRight" aria-hidden="true" data-section-id="cart" data-section-type="cart" data-section-settings='{{ section_settings }}'>
  <div class="Drawer__Header Drawer__Header--bordered Drawer__Container">
      <span class="Drawer__Title Heading u-h4">{{ 'cart.general.title' | t }}</span>

      <button class="Drawer__Close Icon-Wrapper--clickable" data-action="close-drawer" data-drawer-id="sidebar-cart" aria-label="{{ 'header.navigation.close_cart' | t }}">
        {%- render 'icon' with 'close' -%}
      </button>
  </div>

  <form class="Cart Drawer__Content" action="{{ routes.cart_url }}" method="POST" novalidate>
  
    <div class="Drawer__Main" data-scrollable>
 
        <div class="Cart__ShippingNotice Text--subdued">
          <div class="Drawer__Container">
       
            
            
            {% assign free_shipping_amount = settings.cart_free_shipping_threshold  | plus : 0 %}
         
            
            {%- if grand_total <= free_shipping_amount and free_shipping_amount > 0  -%}
              {% assign cart_banlce = free_shipping_amount  %}
              {% assign away_from = cart_banlce | minus: grand_total  %}
            	
            	{% if grand_total == 0 %}
            		{% if settings.cart_show_free_shipping != blank %}
                		<p> Spend ${{away_from}} and get free shipping!</p>
            		{% endif %}
            	{% else %}
                  {% if settings.cart_show_free_shipping != blank %}
                      <p> Spend ${{away_from}} more and get free shipping!</p>
                  {% endif %}
            	{% endif %}
            {% elsif  grand_total >= free_shipping_amount and grand_total <= 10_min_value %}	 
            	{% if settings.cart_show_free_shipping != blank %}
            	 	<p>Congrats you are eligible for free shipping!</p>
            	{% endif %}
             
            	
            {% elsif  grand_total >= 10_min_value and grand_total <= 10_max_value %}
            	{% assign cart_banlce = settings.10_amount  %}
            	{% assign away_from = cart_banlce | minus: grand_total  %}
            	{% if away_from > 0  %}
            		{% if settings.cart_show_free_shipping != blank %}
            			<p>You are eligible for free shipping! </p>
            		{% endif %}
            		{% if settings.cart_show_giftcart != blank %}
            			<p>  ${{away_from}}; away from earning a $10 gift card.</p>
            		{% endif %}
            	{% else %}
            		{% if settings.cart_show_giftcart != blank %}
            		<p>Congrats you are eligible for  $10 gift cards</p>
            		{% endif %}
            		 
             	{%- endif -%}
          
            
            {%- elsif  grand_total >= 20_min_value and grand_total <= 20_max_value | plus : 0  -%}
                {% assign cart_banlce = settings.20_amount  %}
                {% assign away_from = cart_banlce | minus: grand_total  %}
            	{% if away_from > 0  %}
            		{% if settings.cart_show_free_shipping != blank %}
            			<p>You are eligible for free shipping! </p>
            		{% endif %}
            		{% if settings.cart_show_giftcart != blank %}
            			<p>  ${{away_from}} away from earning a $20 gift card.</p>
            		{% endif %}
            	{% else %}
            		{% if settings.cart_show_giftcart != blank %}
            		<p>Congrats you are eligible for  $20 gift cards</p>
            		{% endif %}
            		 
            	{%- endif -%}
           
            {%- elsif  grand_total >= 35_min_value and grand_total <= 35_max_value | plus : 0 -%}
            	{% assign cart_banlce = settings.35_amount  %}
                {% assign away_from = cart_banlce | minus: grand_total  %}
            	{% if away_from > 0  %}
            		{% if settings.cart_show_free_shipping != blank %}
            			<p>You are eligible for free shipping! </p>
            		{% endif %}
            		{% if settings.cart_show_giftcart != blank %}
            			<p>  ${{away_from}} away from earning a $35 gift card.</p>
            		{% endif %}
            	{% else %}
            		{% if settings.cart_show_giftcart != blank %}
            			<p>Congrats you are eligible for  $35 gift cards</p>
            		{% endif %}
            		 
           		{%- endif -%}
            
            
            {%- elsif  grand_total >= 50_min_value and grand_total <= 50_max_value | plus : 0 -%}
            	{% assign cart_banlce = settings.50_amount  %}
                {% assign away_from = cart_banlce | minus: grand_total  %}
            	{% if away_from > 0  %}
            		{% if settings.cart_show_free_shipping != blank %}
            			<p>You are eligible for free shipping! </p>
            		{% endif %}
            		{% if settings.cart_show_giftcart != blank %}
            			<p>  ${{away_from}} away from earning a $50 gift card.</p>
            		{% endif %}
            	{% else %}
            		{% if settings.cart_show_giftcart != blank %}
            		<p>Congrats you are eligible for  $50 gift cards</p>
            		{% endif %}
            		 
            	{%- endif -%}
            
           
           
            {%- elsif  grand_total >= 75_min_value and grand_total <= 75_max_value | plus : 0 -%}
            	{% assign cart_banlce = settings.75_amount  %}
                {% assign away_from = cart_banlce | minus: grand_total  %}
            	{% if away_from > 0  %}
            		{% if settings.cart_show_free_shipping != blank %}
            	 		<p>You are eligible for free shipping! </p>
            		{% endif %}
            		{% if settings.cart_show_giftcart != blank %}
            			<p>  ${{away_from}} away from earning a $75 gift card.</p>
            		{% endif %}
            	{% else %}
            		{% if settings.cart_show_giftcart != blank %}
            			<p>Congrats you are eligible for  $75 gift cards</p>
            		{% endif %}
            		 
            	{%- endif -%}
            
          
            {%- elsif  grand_total >= 100_min_value and grand_total <= 100_max_value | plus : 0 -%}
            	{% assign cart_banlce = settings.100_amount  %}
                {% assign away_from = cart_banlce | minus: grand_total  %}
            	{% if away_from > 0  %}
            		{% if settings.cart_show_free_shipping != blank %}
            			<p>You are eligible for free shipping!  </p>
            		{% endif %}
            		{% if settings.cart_show_giftcart != blank %}
            			<p>  ${{away_from}} away from earning a $100 gift card.</p>
            		{% endif %}
            	{% else %}
            		{% if settings.cart_show_giftcart != blank %}
            			<p>Congrats you are eligible for  $100 gift cards</p>
            		{% endif %}
            		 
            	{%- endif -%}
            
             {%- elsif grand_total >= 100_max_value plus : 0 -%}
            	{% if settings.cart_show_giftcart != blank %}
            		{% if settings.cart_show_giftcart != blank %}
            			<p>Congrats you are eligible for  $100 gift cards</p>
            		{% endif %}
            	{% endif %}
            
            {% elsif free_shipping_amount <= 0  %}
            	{% if settings.cart_show_free_shipping != blank %}
            		<p>Congrats you are eligible for free shipping!</p>
            	{% endif %}
            {%- endif -%}
          </div>
        </div>


      {%- if cart.item_count == 0 -%}
        <p class="Cart__Empty Heading u-h5">{{ 'cart.general.empty' | t }}</p>
      {%- else -%}
        <div class="Drawer__Container">
          <input type="hidden" name="attributes[collection_mobile_items_per_row]" value="">
          <input type="hidden" name="attributes[collection_desktop_items_per_row]" value="">

          {% render 'cart-items' %}
        </div>
      {%- endif -%}
    </div>

    {%- unless cart.item_count == 0 -%}
      <div class="Drawer__Footer" data-drawer-animated-bottom>
        {%- capture shipping_and_taxes_notice -%}{{ 'cart.general.shipping_and_taxes_notice' | t }}{%- endcapture -%}

        {%- if settings.cart_enable_notes or shipping_and_taxes_notice != blank -%}
          {%- if settings.cart_enable_notes -%}
            {%- if cart.note == blank -%}
              <button type="button" class="Cart__NoteButton" data-action="toggle-cart-note">{{ 'cart.general.add_note' | t }}</button>
            {%- else -%}
              <button type="button" class="Cart__NoteButton" data-action="toggle-cart-note">{{ 'cart.general.edit_note' | t }}</button>
            {%- endif -%}
          {%- endif -%}

          {%- if shipping_and_taxes_notice != blank -%}
            <p class="Cart__Taxes Text--subdued">{{ shipping_and_taxes_notice }}</p>
          {%- endif -%}

          {%- if cart.cart_level_discount_applications != blank -%}
            {%- for discount_application in cart.cart_level_discount_applications -%}
              <p class="Cart__Discount">{%- render 'icon' with 'sale' -%} {{ 'cart.general.discount' | t }} ({{ discount_application.title }}): -<span>{{ discount_application.total_allocated_amount | money_without_trailing_zeros }}</span></p>
            {%- endfor -%}
          {%- endif -%}
        {%- endif -%}

        <button type="submit" name="checkout" class="Cart__Checkout Button Button--primary Button--full">
          <span>{{- 'cart.general.checkout' | t -}}</span>
          <span class="Button__SeparatorDot"></span>
          <span>{{ cart.total_price | money_without_trailing_zeros }}</span>
        </button>

        {%- if settings.cart_enable_notes -%}
          <div class="Cart__OffscreenNoteContainer" aria-hidden="true">
            {%- if cart.note == blank -%}
              <span class="Cart__NoteButton">{{ 'cart.general.add_note' | t }}</span>
            {%- else -%}
              <span class="Cart__NoteButton">{{ 'cart.general.edit_note' | t }}</span>
            {%- endif -%}

            <div class="Form__Item">
              <textarea class="Cart__Note Form__Textarea" name="note" id="cart-note" rows="3" placeholder="{{ 'cart.general.note_placeholder' | t }}" data-scrollable>{{ cart.note }}</textarea>
            </div>

            <button type="button" class="Button Button--primary Button--full" data-action="toggle-cart-note">{{ 'cart.general.save_note' | t }}</button>
          </div>
        {%- endif -%}
        
      </div>
    {%- endunless -%}
  </form>
</div>